## GIF Generation

GIF generation requires you to use stateful builder. This is because GIFs are generated by rendering multiple frames and then combining them into a GIF. This is done by calling `render()` multiple times. The approach is similar to React's `useState` hook.

```tsx
/** @jsx JSX.createElement */
/** @jsxFrag JSX.Fragment */
import { JSX, useState, Font, createGIF, Builder } from "canvacord";
import { createWriteStream } from "fs";

function Rotation() {
  // This looks and feels like React's useState hook. The state persists between renders
  const [count, setCount] = useState(0);

  // When "setCount" is called, canvacord will automatically re-render the component and generate a new frame
  setCount(count + 1);

  return (
    <div className="h-full w-full bg-indigo-600 flex items-center justify-center">
      <h1
        className="text-9xl text-white font-bold"
        style={{ transform: `rotate(${count}deg)` }}
      >
        {count}Â°
      </h1>
    </div>
  );
}

class Demo extends Builder {
  constructor() {
    // 512x512 is the canvas size for each frame
    super(512, 512);
  }

  public async render() {
    // we return the component we want to render. This defines how each frame will look
    return <Rotation />;
  }
}

// load font for text rendering
Font.loadDefault();

const demo = new Demo();
// We need to define maximum number of iterations this component will render. Not setting this will result in infinite re-render or weird behavior.
// Always make sure to set this to a reasonable number, otherwise canvacord may not resolve the promise at all.
demo.setIterations(360);

// Canvacord automatically flushes the frames cache after the GIF is generated. This is to prevent memory leaks. This won't stop you from reusing the builder in the future though. Iterations value is also reset to 0 after the GIF is generated.

// createGIF returns a promise that resolves to a stream of GIF data
const gif = createGIF(demo, {
  repeat: 0,
  delay: 15,
  dispose: 0,
  framerate: 15,
  quality: 10,
});

gif.then((stream) => {
  stream.pipe(createWriteStream(`${__dirname}/output/test.gif`));
});
```

## Result

![GIF](https://raw.githubusercontent.com/neplextech/canvacord/main/packages/canvacord/validations/hooks/output/test.gif)
